## Introduction
End-to-end variable length Chinese character detection and recognition based on Tensorflow and Keras

* Text detection: CTPN
* Text recognition: DenseNet + CTC

## Environmental deployment
``` Bash
sh setup.sh
```
* Note: Before the CPU environment is executed, comment out the for gpu part and uncomment the for cpu part.



## Demo
Put the test image in the test_images directory
``` Bash
python demo.py
```

## Model training

### CTPN training
See ctpn/README.md for details.


### DenseNet + CTC training

#### 1. data preparation

Data set: https://pan.baidu.com/s/1QkI7kjah8SPHwOQ40rS1Pw (password: lu7m)
* A total of 3.64 million images, divided into training and verification sets according to 99:1
* Data is randomly generated by changes in font, size, grayscale, blur, perspective, and stretch using the Chinese corpus (news + classical Chinese).
* Contains 5990 characters including Chinese characters, English letters, numbers and punctuation
* Each sample is fixed at 10 characters, and the characters are randomly taken from the sentences in the corpus
* Image resolution is unified to 280x32

The image is decompressed and placed in the train/images directory. The description file is placed in the train directory.
#### 2. training

``` Bash
cd train
python train.py
```

#### 3. result

| val acc | predict | model |
| -----------| ---------- | -----------|
| 0.983 | 8ms | 18.9MB |

* GPU: GTX TITAN X
* Keras Backend: Tensorflow

#### 4. Generate your own sample



you can refer to [SynthText_Chinese_version](https://github.com/JarveeLee/SynthText_Chinese_version)，[TextRecognitionDataGenerator](https://github.com/Belval/TextRecognitionDataGenerator)和[text_renderer](https://github.com/Sanster/text_renderer)

## Show results

<div>
<img width="420" height="420" src="https://github.com/YCG09/chinese_ocr/blob/master/demo/demo_detect.jpg"/>
<img width="420" height="420" src="https://github.com/YCG09/chinese_ocr/blob/master/demo/demo_rec.jpg"/>
</div>

## 参考

[1] https://github.com/eragonruan/text-detection-ctpn

[2] https://github.com/senlinuc/caffe_ocr

[3] https://github.com/chineseocr/chinese-ocr

[4] https://github.com/xiaomaxiao/keras_ocr
